<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="chart1.js"></script>
    
  

  
          <title>Basement Cannabis Strains</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
   
    <div id="banner">
       <br><br><br><br><br><br><br>
        <p>
       What is the differences between cannabis strains? <br> What 
       are the differences in potency levels regarding CBD and THC? 
       
      </p>

    </div>

    <style>
    .centeralign {
      text-align:center;
    }
    </style>

    
    <style>
        #chart1 {
          width: 500px;
        }
        .axis .domain {
          display: none;
        }
        </style>
        <div id="chart1">
        <svg width="500" height="500"></svg>
        </div>

  <br><br><br>
  <select>
    <option value="Plant Type">Plant Type</option>
    <option value="Sativa">Sativa</option>
    <option value="Indica">Indica</option>
    <option value="Both">Both</option>
  </select>

  
  <select>
    <option value="Cannabinoid Content">Cannabinoid Content</option>
    <option value="CBD">CBD</option>
    <option value="THC">THC</option>
    <option value="Both">Both</option>
  </select>

<br><br><br>
 <div class="row">
    <div id="Sativa" class="column">
      Sativa
      <p>
        Sativa refers to the tall, narrow-leaf varieties of cannabis. Sativa
        is thought to be energizing. Sativa strains tend to produce a "head high", and uplifting, 
        and stimulating effect. Sativa are thought of as daytime strainsthey are 
        used to help the feeling of productivity, creativity, and focus.
        Sativa is also used to help mitigate stress and anxiety.
      </p>
    </div>
    <div id="Indica"class="column">
      Indica
      <p>
        Inidica strains tend to have more of a full-body effect. Indicas
        tend to be helpful in relaxing and relieving insomnia. Most commen effects
        of indica strains are feelings of relaxation, euphoria, happiness, and sleepiness.
        It is known as a "nighttime" strain used for relaxing.

      </p>
    </div>
    <div id="Hybrids" class="column">
      Hybrids
      <p>
        Hybrid strains are bred from both indica-and-sativa descended plants. There
        has been a long history of crossbreeding cannabis stains, it is rare 
        to find a pure indica or pure sativa strain. Most strains are in fact
        hybrids. The effects of hybrid strains are dependent on the hybrid weed 
        strain and the effects the "parent" strains are known to produce.
        *Special Mention*
        Cannabis Rudalis is not a highly psychotropic strain. It is used primarily as 
        source of breeding with other strains to create hybrids. These 
        hybrids flower earlier and can be adjusted to grow in northern climates.
      </p>
    </div>
  </div>




    
      
    
        <div class="footer">
        <div id="button"></div>
<div id="container">
<div id="cont">
<div class="footer_center">
	   <h6>Contact Email: alonzoceci19@gmail.com</h6>
</div>
</div>
</div>
</div>
    

  
      <p>Graph Diplaying Different Levels of THC & CBD in different strains</p>
    </div>

    <div id="tooltip">
      <h2 id="title"></h2>
      Value: <span id="value"></span>
    </div>

    <script src="banner.js"></script>
    <script type="text/javascript" src="chart1.js"></script>
    <script>
    // create the svg
    var svg = d3.select("svg"),
        margin = {top: 20, right: 20, bottom: 30, left: 40},
        width = +svg.attr("width") - margin.left - margin.right,
        height = +svg.attr("height") - margin.top - margin.bottom,
        g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    
    // set x scale
    var x = d3.scaleBand()
        .rangeRound([0, width])
        .paddingInner(0.05)
        .align(0.1);
    
    // set y scale
    var y = d3.scaleLinear()
        .rangeRound([height, 0]);
    
    // set the colors
    var z = d3.scaleOrdinal()
        .domain(keys)
        .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);
    
    // load the csv and create the chart
    d3.csv("data.csv", function(d, i, columns) {
      for (i = 1, t = 0; i < columns.length; ++i) t += d[columns[i]] = +d[columns[i]];
      d.total = t;
      return d;
    }, function(error, data) {
      if (error) throw error;
    
      var keys = data.columns.slice(1);

      var keys =d3.map(data, function(d){return(d.group)}).keys()
    
      data.sort(function(a, b) { return b.total - a.total; });
      x.domain(data.map(function(d) { return d.Strain; }));
      y.domain([0, d3.max(data, function(d) { return d.total; })]).nice();
      z.domain(keys);
      
      console.log(data)
      dataNormalized = []
      data.forEach(function(d){

        tot = 0
        for (i in keys){ name=keys[i]; tot += +d[name]}
        for (i in keys){ name=keys[i]; d[name] = d[name] /tot * 100}

      })

      g.append("g")
        .selectAll("g")
        .data(d3.stack().keys(keys)(data))
        .enter().append("g")
          .attr("fill", function(d) { return z(d.key); })
        .selectAll("rect")
        .data(function(d) { return d; })
        .enter().append("rect")
          .attr("x", function(d) { return x(d.data.Strain); })
          .attr("y", function(d) { return y(d[1]); })
          .attr("height", function(d) { return y(d[0]) - y(d[1]); })
          .attr("width", x.bandwidth())
        .on("mouseover", function() { tooltip.style("display", null); })
        .on("mouseout", function() { tooltip.style("display", "none"); })
        .on("mousemove", function(d) {
          console.log(d);
          var xPosition = d3.mouse(this)[0] - 5;
          var yPosition = d3.mouse(this)[1] - 5;
          tooltip.attr("transform", "translate(" + xPosition + "," + yPosition + ")");
          tooltip.select("text").text(d[1]-d[0]);
        });
    
      g.append("g")
          .attr("class", "axis")
          .attr("transform", "translate(0," + height + ")")
          .call(d3.axisBottom(x));
    
      g.append("g")
          .attr("class", "axis")
          .call(d3.axisLeft(y).ticks(null, "s"))
        .append("text")
          .attr("x", 2)
          .attr("y", y(y.ticks().pop()) + 0.5)
          .attr("dy", "0.32em")
          .attr("fill", "#000")
          .attr("font-weight", "bold")
          .attr("text-anchor", "start");
    
      var legend = g.append("g")
          .attr("font-family", "sans-serif")
          .attr("font-size", 10)
          .attr("text-anchor", "end")
        .selectAll("g")
        .data(keys.slice().reverse())
        .enter().append("g")
          .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });
    
      legend.append("rect")
          .attr("x", width - 19)
          .attr("width", 19)
          .attr("height", 19)
          .attr("fill", z);
    
      legend.append("text")
          .attr("x", width - 24)
          .attr("y", 9.5)
          .attr("dy", "0.32em")
          .text(function(d) { return d; });
    });
    
      // Prep the tooltip bits, initial display is hidden
      var tooltip = svg.append("g")
        .attr("class", "tooltip")
        .style("display", "none");
          
      tooltip.append("rect")
        .attr("width", 60)
        .attr("height", 20)
        .attr("fill", "white")
        .style("opacity", 0.5);
    
      tooltip.append("text")
        .attr("x", 30)
        .attr("dy", "1.2em")
        .style("text-anchor", "middle")
        .attr("font-size", "12px")
        .attr("font-weight", "bold");
    
        
  
    </script>
</html>